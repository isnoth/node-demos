<h2>React-Bootstrap Testing</h2>
<p> use react to notify</p>

<div id="label"></div>
<div id="later"></div>

<script src="bower_components/react/react.js"></script>
<script src="bower_components/react/react-dom.js"></script>
<script src="bower_components/babel/browser.js"></script>
<script src="bower_components/react-bootstrap/react-bootstrap.js"></script>
<script src="bower_components/notify.js/notify.js"></script>
<script src="bower_components/later/later.min.js"></script>

<link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"/>



<script type="text/babel">

  var LaterApp = React.createClass({
    getInitialState: function(){
      return {count:1}
    },

    componentDidMount: function(){
      this.timer = setInterval(function () {
        this.setState({
          count: this.state.count +1
        })

        //do notify every 10 sec
        console.log(this.state.count)
        if ((this.state.count % 10) == 0){
          this.doNotify()
        }

      }.bind(this), 1000)
    },

    componentWillUnmount: function() {
      clearInterval(this.timer)
    },
    

    render: function(){
      return (
        <div> {this.state.count} </div>
      )
    },

    onPermissionGranted: function() {
        console.log('Permission has been granted by the user');
        doNotification();
    },

    doNotification: function () {
        var myNotification = new Notify('Yo dawg!', {
            body: 'This is an awesome notification',
            tag: 'unique tag',
            timeout: 4
        });
        myNotification.show();
    },

    doNotify: function(){
      if (!Notify.needsPermission) {
          this.doNotification();
      } else if (Notify.isSupported()) {
          Notify.requestPermission(this.onPermissionGranted, this.onPermissionDenied);
      }
    },


  })



  var TestNotify= React.createClass({
    getInitialState: function(){
      return {
        edit: false,
      };
    },

    changeEdit: function(){
      this.setState({edit: !this.state.edit});
    },

    render: function(){
      var Button = ReactBootstrap.Button
      var Input = ReactBootstrap.Input
      var Col = ReactBootstrap.Col

      if (this.state.edit){
        return (
          <div onClick={this.changeEdit}>
            <LaterApp />
          </div>
        )
      }else{
        return (
          <div onClick={this.changeEdit} >
            <label> off  </label>
          </div>
        )
      }
    }
  })



  ReactDOM.render(<TestNotify />, document.getElementById("later"));
</script>
